<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="">
<meta name="author" content="">

<title>国内首家喷人平台 打造第一发泄地噪音发生地</title>

<!-- Bootstrap Core CSS -->
<link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">
<!-- Custom CSS -->
<link rel="stylesheet" href="/css/style.css">

<!-- Owl Carousel Assets -->
<link href="/owl-carousel/owl.carousel.css" rel="stylesheet">
<link href="/owl-carousel/owl.theme.css" rel="stylesheet">

<!-- Custom Fonts -->
<link rel="stylesheet"
	href="/font-awesome-4.4.0/css/font-awesome.min.css" type="text/css">
<!-- Custom styles for our template -->
<!-- 	<link rel="stylesheet" href="/assets/css/bootstrap-theme.css" media="screen" > -->
	<link rel="stylesheet" href="/assets/css/main.css">
	<link rel="stylesheet" href="/assets/js/highlight/styles/monokai.css">
<!-- jQuery and Modernizr-->
<script src="/js/jquery.min.js"></script>

<!-- Core JavaScript Files -->
<script src="/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/danmu/css/style.css" />
    <link rel="stylesheet" type="text/css" href="/danmu/css/barrager.css">
    <link rel="stylesheet" type="text/css" href="/danmu/pick-a-color/css/pick-a-color-1.2.3.min.css">
    <link type="text/css" rel="stylesheet" href="/danmu/syntaxhighlighter/styles/shCoreDefault.css"/>
    <script type="text/javascript" src="/danmu/js/tinycolor-0.9.15.min.js"></script>  
    <script type="text/javascript" src="/danmu/js/jquery.barrager.js"></script>
    <script type="text/javascript" src="/danmu/syntaxhighlighter/scripts/shCore.js"></script>
    <script type="text/javascript" src="/danmu/syntaxhighlighter/scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="/danmu/syntaxhighlighter/scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="/danmu/pick-a-color/js/pick-a-color-1.2.3.min.js"></script> 
    <link rel="stylesheet"
	href="/video-js//video-js.css" type="text/css">
    <script src="/video-js/video.js"></script>
<script src="/video-js/videojs-contrib-hls.min.js"></script>

<style type="text/css">

.chat{

}
	body {
		  font-family: "Microsoft YaHei" ! important;
		  font-color:#222;
	}
		pre {
			line-height: 2em;
		  font-family: "Microsoft YaHei" ! important;
	}
	h4 {
		line-height: 2em;
	}

 .chatmessage{
	margin-left: 12px;
	margin-top: 10px;
	vertical-align: middle; /* 居中对齐， */
	font-size: 16px;
}

	.ctr {
		font-size: 1em;
		  line-height: 2em;
	}
/* 	#danmu{ */
/* 	position: absolute; */
/* 	width: 650px; */
/* 	height: 650px; */
/* 	} */
</style>
</head>

<body>
	<header>
	<input type="hidden"  id="chatUserIdHidden"  value="${chatUserId }">
	<input type="hidden"  id="roomIdHidden"  value="${roomId }">
		<!--Top-->
		<nav id="top">
			<div class="container">
				<div class="row">
					<div class="col-md-6 col-sm-6">
					
					</div>
					<div class="col-md-6 col-sm-6">
						<ul class="list-inline top-link link">
							<li><a href="index.html"><i class="fa fa-home"></i> 主页</a></li>
							<li><a href="contact.html"><i class="fa fa-comments"></i>
									联系我们</a></li>
							<li><a href="#"><i class="fa fa-question-circle"></i> 关于</a></li>
						</ul>
					</div>
				</div>
			</div>
		</nav>

		<!--Navigation-->
		<nav id="menu" class="navbar">
			<div class="container">
				<div class="navbar-header">
					<span id="heading" class="visible-xs">分类</span>
					<button type="button" class="btn btn-navbar navbar-toggle"
						data-toggle="collapse" data-target=".navbar-ex1-collapse">
						<i class="fa fa-bars"></i>
					</button>
				</div>
				<div class="collapse navbar-collapse navbar-ex1-collapse">
					<ul class="nav navbar-nav">
						<li><a href="index.html"><i class="fa fa-home"></i> 主页</a></li>
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown"><i class="fa fa-user"></i> 账号</a>
							<div class="dropdown-menu">
								<div class="dropdown-inner">
									<ul class="list-unstyled">
										<li><a href="archive.html">登录</a></li>
										<li><a href="archive.html">注册</a></li>
									</ul>
								</div>
							</div></li>
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown"><i class="fa fa-play-circle-o"></i> 视频</a>
							<div class="dropdown-menu">
								<div class="dropdown-inner">
									<ul class="list-unstyled">
										<li><a href="archive.html">Text 201</a></li>
										<li><a href="archive.html">Text 202</a></li>
										<li><a href="archive.html">Text 203</a></li>
										<li><a href="archive.html">Text 204</a></li>
										<li><a href="archive.html">Text 205</a></li>
									</ul>
								</div>
							</div></li>
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown"><i class="fa fa-list"></i> 分类</a>
							<div class="dropdown-menu" style="margin-left: -203.625px;">
								<div class="dropdown-inner">
									<ul class="list-unstyled">
										<li><a href="archive.html">Text 301</a></li>
										<li><a href="archive.html">Text 302</a></li>
										<li><a href="archive.html">Text 303</a></li>
										<li><a href="archive.html">Text 304</a></li>
										<li><a href="archive.html">Text 305</a></li>
									</ul>
									<ul class="list-unstyled">
										<li><a href="archive.html">Text 306</a></li>
										<li><a href="archive.html">Text 307</a></li>
										<li><a href="archive.html">Text 308</a></li>
										<li><a href="archive.html">Text 309</a></li>
										<li><a href="archive.html">Text 310</a></li>
									</ul>
									<ul class="list-unstyled">
										<li><a href="archive.html">Text 311</a></li>
										<li><a href="archive.html">Text 312</a></li>
										<li><a href="archive.html#">Text 313</a></li>
										<li><a href="archive.html#">Text 314</a></li>
										<li><a href="archive.html">Text 315</a></li>
									</ul>
								</div>
							</div></li>
						<li><a href="archive.html"><i class="fa fa-cubes"></i> 黑涩</a></li>
						<li><a href="contact.html"><i class="fa fa-envelope"></i>
								联系</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>
	<!-- Header -->

	<!-- /////////////////////////////////////////Content -->
	<div id="page-content" class="single-page">
		<div style="margin-top: 10px;margin-left: 10px">
			<div class="row">
				<div id="" class="col-lg-8">		
<div id="danmu">
				
<video id="example-video"  class="video-js vjs-default-skin "  width="100%" height="100%"  controls>
  <source
     src="http://192.168.1.33/hls/ding.m3u8"
     type="application/x-mpegURL">
</video>
</div>	

<br>
					<div class="share">
						<ul class="list-inline center">
							<li><a href="#" class="btn btn-facebook"><i
									class="fa fa-facebook"></i> Share</a></li>
							<li><a href="#" class="btn btn-twitter"><i
									class="fa fa-twitter"></i> Tweet</a></li>
							<li><a href="#" class="btn btn-pinterest"><i
									class="fa fa-pinterest"></i> Tweet</a></li>
							<li><a href="#" class="btn btn-google"><i
									class="fa fa-google-plus-square"></i> Google+</a></li>
							<li><a href="#" class="btn btn-mail"><i
									class="fa fa-envelope-o"></i> E-mail</a></li>
						</ul>
					</div>
					<div class="line"></div>
					<h1 class="vid-name">
						<a href="#">Video's Name</a>
					</h1>
					<div class="info">
						<h5>
							By <a href="#">Kelvin</a>
						</h5>
						<span><i class="fa fa-calendar"></i>25/3/2015</span> <span><i
							class="fa fa-heart"></i>1,200</span>
					</div>
					<p style="margin-top: 20px">Aenean feugiat in ante et blandit.
						Vestibulum posuere molestie risus, ac interdum magna porta non.
						Pellentesque rutrum fringilla elementum. Curabitur tincidunt porta
						lorem vitae accumsan. Pellentesque habitant morbi tristique
						senectus et netus et malesuada fames ac turpis egestas. Donec ac
						euismod turpis.Aenean feugiat in ante et blandit. Vestibulum
						posuere molestie risus, ac interdum magna porta non. Pellentesque
						rutrum fringilla elementum. Curabitur tincidunt porta lorem vitae
						accumsan. Pellentesque habitant morbi tristique senectus et netus
						et malesuada fames ac turpis egestas. Donec ac euismod turpis.</p>
					<h4>Heading</h4>
					<p style="margin-top: 20px">Aenean feugiat in ante et blandit.
						Vestibulum posuere molestie risus, ac interdum magna porta non.
						Pellentesque rutrum fringilla elementum. Curabitur tincidunt porta
						lorem vitae accumsan. Pellentesque habitant morbi tristique
						senectus et netus et malesuada fames ac turpis egestas. Donec ac
						euismod turpis.</p>
					<div class="vid-tags">
						<a href="#">Animal</a> <a href="#">Aenean</a> <a href="#">Feugiat</a>
						<a href="#">Risus</a> <a href="#">Magna</a>
					</div>
					<div class="line"></div>
					<div class="comment">
						<h3>Leave A Comment</h3>
						<form name="form1" method="post" action="">
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<input type="text" class="form-control input-lg" name="name"
											id="name" placeholder="Enter name" required="required" />
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<input type="email" class="form-control input-lg" name="email"
											id="email" placeholder="Enter email" required="required" />
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<div class="form-group">
										<textarea name="messagesend" id="messagesendd" class="form-control"
											rows="4" cols="25" required="required" placeholder="Message"></textarea>
									</div>
									<button type="submit" class="btn btn-4 btn-block"
										name="btnSend" id="btnSend">Send</button>
								</div>
							</div>
						</form>
					</div>
					<div class="line"></div>
					<div class="box">
						<div class="box-header">
							<h2>
								<i class="fa fa-globe"></i> RELATED VIDEOS
							</h2>
						</div>
						<div class="box-content">
							<div class="row">
								<div class="col-md-4">
									<div class="wrap-vid">
										<div class="zoom-container">
											<div class="zoom-caption">
												<span>Video's Tag</span> <a href="single.html"> <i
													class="fa fa-play-circle-o fa-5x" style="color: #fff"></i>
												</a>
												<p>Video's Name</p>
											</div>
											<img src="images/7.jpg" />
										</div>
										<h3 class="vid-name">
											<a href="#">Video's Name</a>
										</h3>
										<div class="info">
											<h5>
												By <a href="#">Kelvin</a>
											</h5>
											<span><i class="fa fa-calendar"></i>25/3/2015</span> <span><i
												class="fa fa-heart"></i>1,200</span>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="wrap-vid">
										<div class="zoom-container">
											<div class="zoom-caption">
												<span>Video's Tag</span> <a href="single.html"> <i
													class="fa fa-play-circle-o fa-5x" style="color: #fff"></i>
												</a>
												<p>Video's Name</p>
											</div>
											<img src="images/8.jpg" />
										</div>
										<h3 class="vid-name">
											<a href="#">Video's Name</a>
										</h3>
										<div class="info">
											<h5>
												By <a href="#">Kelvin</a>
											</h5>
											<span><i class="fa fa-calendar"></i>25/3/2015</span> <span><i
												class="fa fa-heart"></i>1,200</span>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="wrap-vid">
										<div class="zoom-container">
											<div class="zoom-caption">
												<span>Video's Tag</span> <a href="single.html"> <i
													class="fa fa-play-circle-o fa-5x" style="color: #fff"></i>
												</a>
												<p>Video's Name</p>
											</div>
											<img src="images/9.jpg" />
										</div>
										<h3 class="vid-name">
											<a href="#">Video's Name</a>
										</h3>
										<div class="info">
											<h5>
												By <a href="#">Kelvin</a>
											</h5>
											<span><i class="fa fa-calendar"></i>25/3/2015</span> <span><i
												class="fa fa-heart"></i>1,200</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div id="" class="col-lg-4">
					<!---- Start Widget ---->
					<div class="panel panel-default"
						style="width: 350px; height: 540px; ">

						<div class="content">
							<ul id="myTab" class="nav nav-tabs">
								<li class="active"><a href="#chat" data-toggle="tab">
										无码交流区 </a></li>
								<li><a href="#rank" data-toggle="tab">土豪装逼区 </a></li>
							
								<li><a href="#fuli" data-toggle="tab">福利共享区 </a></li>
							</ul>
							<div id="myTabContent" class="tab-content">
								<div class="tab-pane fade in active" id="chat">
									<div class="panel panel-default">
										<div class="panel-body" style="width: 350px; height: 350px" >
											<div id="chatList" style="overflow-y:scroll;overflow-x:hidden;width: 350px; height: 330px" >
											  
											  
											</div>
										</div>
									</div>
									<div class="panel panel-default">
										<textarea  id="sendChatMessage"
											style="width: 349px; height: 50px; resize: none; border: 0; overflow-y: hidden;">
										</textarea>
									</div>
										<div style="float: right">
	<button id="send" type="button" class="btn btn btn-primary btn-lg" onclick="createAndSendChatMessage()">发送</button>
									</div>
									
								</div>

								<div class="tab-pane fade" id="rank">
									<ul>
										<li>1</li>
										<li>2</li>
										<li>3</li>
										<li>4</li>
										<li>5</li>
										<li>6</li>
										<li>7</li>

									</ul>

								</div>
												
								
									<div class="tab-pane fade" id="fuli">
								<div class="tab-pane fade in active" id="chat">


									<div class="panel panel-default">
										<div class="panel-body" style="width: 350px; height: 350px" id="chatListForImage">
											这是一个基本的面板
											</div>
									</div>

									<div class="panel panel-default">

										<textarea
											style="width: 349px; height: 50px; resize: none; border: 0; overflow-y: hidden;"></textarea>

									</div>
									<div>
									<div style="float: right">
										<button id="sendfuli" type="button" class="btn btn btn-primary btn-lg">发送</button>
									</div>
									<div style="float: right;margin-right: 30px">
									  <img id="addImage"
										style="height: 30px; width: 30px"
										src="/images/addImge.jpg" alt=""
										onclick="showSelectButton()" class="img-responsive">
									</div>
									<!-- 图片上传组件隐藏，点击调用-->
									<input type="file" id="img" onchange="preView()"
								style="display: none">
									
									</div>
								</div>

								</div>
							</div>
						</div>

					</div>
				
			</div>
		</div>
	</div>
</div>
	<footer>
		<div class="top-footer">
			<ul class="footer-social list-inline">
				<li><a href="#"><i class="fa fa-twitter"></i> <span>Twitter</span></a></li>
				<li><a href="#"><i class="fa fa-facebook"></i> <span>Facebook</span></a></li>
				<li><a href="#"><i class="fa fa-google-plus"></i> <span>Google+</span></a></li>
				<li><a href="#"><i class="fa fa-youtube"></i> <span>Video'sTag</span></a></li>
				<li><a href="#"><i class="fa fa-vimeo-square"></i> <span>Vimeo</span></a></li>
				<li><a href="#"><i class="fa fa-pinterest"></i> <span>Pinterest</span></a></li>
				<li><a href="#"><i class="fa fa-rss"></i> <span>Rss</span></a></li>
			</ul>
		</div>
		<div class="wrap-footer">
			<div class="container">
				<div class="row">
					<aside class="col-footer col-md-3">
						<h2 class="footer-title">About Us</h2>
						<div class="textwidget">
							Aenean feugiat in ante et blandit. Vestibulum posuere molestie
							risus, ac interdum magna porta non. Pellentesque rutrum fringilla
							elementum. Curabitur tincidunt porta lorem vitae accumsan. <br>
							<br> Aenean feugiat in ante et blandit. Vestibulum posuere
							molestie risus, ac interdum magna porta non. Pellentesque rutrum
							fringilla elementum. Curabitur tincidunt porta lorem vitae
							accumsan.
						</div>
					</aside>
					<aside class="col-footer col-md-3 widget_recent_entries">
						<h2 class="footer-title">Recent Posts</h2>
						<ul>
							<li><a href="#">MOST VISITED COUNTRIES</a></li>
							<li><a href="#">5 PLACES THAT MAKE A GREAT HOLIDAY</a></li>
							<li><a href="#">PEBBLE TIME STEEL IS ON TRACK TO SHIP IN
									JULY</a></li>
							<li><a href="#">STARTUP COMPANY&#8217;S CO-FOUNDER TALKS
									ON HIS NEW PRODUCT</a></li>
						</ul>
					</aside>
					<aside class="col-footer col-md-3">
						<h2 class="footer-title">NEWS LETTER</h2>
						If you want to receive our latest news send directly to your
						email, please leave your email address bellow. Subscription is
						free and you can cancel anytime.
						<form action="#" method="post">
							<input type="text" name="your-name" value="" size="40"
								placeholder="Your Email" /> <input type="submit"
								value="SUBSCRIBE" class="btn btn-3" />
						</form>
					</aside>
					<aside class="col-footer col-md-3 wptt_TwitterTweets">
						<h2 class="footer-title">Twitter</h2>
						<ul class="fetched_tweets light">
							<li class="tweets_avatar">
								<div class="tweet_wrap">
									<div class="wdtf-user-card ltr">
										<div class="clear"></div>
									</div>
									<div class="tweet_data">
										Check out 'NewsTube - Magazine Blog &amp; Video' on <a
											href="#" target="_blank" rel="nofollow">#EnvatoMarket</a> <a
											href="#" target="_blank" rel="nofollow">#themeforest</a> <a
											href="http://t.co/jQV1MrQQKY" target="_blank" rel="nofollow">http://t.co/jQV1MrQQKY</a>
									</div>
									<br />
									<div class="clear"></div>
									<div class="times">
										<em> <a href="#" target="_blank"
											title="Follow cactusthemes on Twitter [Opens new window]">
												2 months ago </a>
										</em>
									</div>
									<div class="clear"></div>
								</div>
								<div class="clear"></div>
							</li>
							<li class="tweets_avatar">
								<div class="tweet_wrap">
									<div class="wdtf-user-card ltr">
										<div class="clear"></div>
									</div>
									<div class="tweet_data">
										Our latest theme 'Nano - Simple Magazine WordPress Theme' on <a
											href="#" target="_blank" rel="nofollow">#EnvatoMarket</a> <a
											href="http://twitter.com/search?q=%23themeforest"
											target="_blank" rel="nofollow">#themeforest</a> <a
											href="http://t.co/IfZTbJTk06" target="_blank" rel="nofollow">http://t.co/IfZTbJTk06</a>
									</div>
									<br />
									<div class="clear"></div>
									<div class="times">
										<em> <a href="#" target="_blank"
											title="Follow cactusthemes on Twitter [Opens new window]">
												5 months ago </a>
										</em>
									</div>
									<div class="clear"></div>
								</div>
								<div class="clear"></div>
							</li>
						</ul>
					</aside>
				</div>
			</div>
		</div>
		<div class="bottom-footer">
			<div class="container">
				<div class="row">
					<div class="col-md-6 col-sm-6 copyright">
						<span>Copyright &copy; 2015.Company name All rights
							reserved.<a target="_blank" href="http://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a>
						</span>
					</div>
					<div class="col-md-6 col-sm-6 link">
						<div class="menu-footer-menu-container">
							<ul id="menu-footer-menu" class="menu list-inline">
								<li><a href="#"><i class="fa fa-home"></i> Home</a></li>
								<li><a href="#"><i class="fa fa-comments"></i> Contact</a></li>
								<li><a href="#"><i class="fa fa-question-circle"></i>
										FAQ</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<!-- Footer -->

	<!-- JS -->
	<script src="/owl-carousel/owl.carousel.js"></script>
	<script type="text/javascript">	
	   var player = videojs('example-video', { fluid: true }, function () {
           this.play(); // if you don't trust autoplay for some reason  
        });
	
	   var websocket=null;
			// 判断当前浏览器是否支持WebSocket
			if ('WebSocket' in window) {
				//websocket链接字符串
				var strConn = "ws://localhost:2080/chatServer?";
				//从隐藏域中取值
				var chatUserId=$("#chatUserIdHidden").val();
				var roomId=$("#roomIdHidden").val();
				strConn=strConn+"ROOMID="+roomId;
				strConn=strConn+"&CHATUSERID="+chatUserId;
				websocket = new WebSocket(strConn);
			} else {
				alert('browser Not support websocket')
			}

			// 连接发生错误的回调方法
			websocket.onerror = function() {
			
			};

			// 连接成功建立的回调方法
			websocket.onopen = function() {
				
			}
			// 接收到消息的回调方法
			websocket.onmessage = function(event) {
				if (event.data == 'SUCCESS') {
					successToServer();
					return;
				}
				var jsonObj = JSON.parse(event.data);
				setMessageOnHtml(jsonObj);
				add();					
				var item={
						   img:'/danmu/img/heisenberg.png', //图片 
						   info:jsonObj.message, //文字 
						   href:'http://www.yaseng.org', //链接 
						   close:true, //显示关闭按钮 
						   speed:8, //延迟,单位秒,默认8 s 
						   color:'#fff', //颜色,默认白色 
						   old_ie_color:'#000000', //ie低版兼容色,不能与网页背景相同,默认黑色 
				 };
				
						$('#danmu').barrager(item);
			}
			function add()
			{
			var now = new Date();
			var div = document.getElementById('chatList');
			div.scrollTop = div.scrollHeight;
			}
			
			 $('#sendChatMessage').keydown(function(e){
			   if(e.keyCode==13){
				   createAndSendChatMessage();
			    }
			    });
			// 连接关闭的回调方法
			websocket.onclose = function() {
				// setMessageInnerHTML("WebSocket closed");
				alert("oncolde");
			}
	 //监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。
	     window.onbeforeunload = function() {
			//连接关闭的回调方法
			websocket.onclose = function() {
			}
		}

	   
		//随机获取颜色值
		function getReandomColor(){
		    return '#'+(function(h){
		    return new Array(7-h.length).join("0")+h
		    })((Math.random()*0x1000000<<0).toString(16))
		}
		function successToServer(){
			var p="<span>连接弹幕成功，请开始你的表演。。。。</span><br>";
			$("#chatList").append(p);
			return;
		}
		 function setMessageOnHtml(jsonObj) {
		    	  //如果是聊天消息
	          if (jsonObj.messageMode == 'CHAT_MESSAGE') {
			    	var p="<span class=''>" +jsonObj.message
			    			                   +"</span><br>";
			    	$("#chatList").append(p);	    			    
			  }
			    //如果是管理员系统消息
			    else if (jsonObj.messageMode == 'ADMIN_MESSAGE') {

			} 
			    //系统广播
			    else {

			}

		}
			   
	 //创建聊天消息	
	              function createAndSendChatMessage() {
	   				var jsonObj = {};
	   				jsonObj.uuid=UUID();
	   				jsonObj.messageMode = "CHAT_MESSAGE";
	   				jsonObj.messageType = "TEXT";
	   				jsonObj.message = document.getElementById('sendChatMessage').value;
	   				if(jsonObj.message==""){
                        alert("发送的字符串不能为空");
                        return;
		   				}
	   				websocket.send(JSON.stringify(jsonObj));
	   				$("#sendChatMessage").val("");				
	   			}
	   //发送图片或者文件
	   	function  preView()    {    	 
	           var img = document.getElementById('img');
	                   var suffix=img.value;
	           var strs= new Array(); //定义一数组用来接收后缀
	           strs=suffix.split(".");
	           var fileSuffix=strs[1];
	           var imgFile = new FileReader();
	           imgFile.readAsDataURL(img.files[0]);       
	           imgFile.onload = function () {
	           	if(fileSuffix=='GIF'||fileSuffix=='gif'||fileSuffix=='JPEG'||fileSuffix=='jpeg'||fileSuffix=='PNG'||fileSuffix=='png'||fileSuffix=='JPG'||fileSuffix=='jpg'){
	           		sendImageNo(this.result);	
	           		return ;
	           	}    else{
	           		sendBinary(this.result,fileSuffix);
	           	}         		        	       
	           }
	          }
	   	/**
	   	发送二进制文件
	   	**/
	   	 function sendBinary(binary,fileSuffix){
	   	        var jsonObj = {};
	   	        jsonObj.uuid=UUID();
	   			jsonObj.indentId = indentId;
	   			jsonObj.messageMode = "INDENT_MESSAGE";
	   			jsonObj.messageType ="BINARY";
	   			jsonObj.suffix =fileSuffix;
	   			jsonObj.imageBase64=binary;
	   			var messageJson=JSON.stringify(jsonObj);
	   			websocket.send(messageJson);
	   		    }
	   	// uuid
	   	
	        function UUID()   {
	            var s = [];
	            var hexDigits = "0123456789abcdef";
	            for (var i = 0; i < 36; i++) {
	                s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
	            }
	            s[14] = "4";  // bits 12-15 of the time_hi_and_version field to 0010
	            s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);  // bits 6-7 of the clock_seq_hi_and_reserved to 01
	            s[8] = s[13] = s[18] = s[23] = "-";
	            var uuid = s.join("");
	            return uuid;
	    }
	       function sendImageNo(image)
	       {
	           var jsonObj = {};
	   		jsonObj.indentId = indentId;
	   		jsonObj.uuid=UUID();
	   		jsonObj.messageMode = "INDENT_MESSAGE";
	   		jsonObj.messageType ="IMAGE";		
	   		jsonObj.imageBase64=image;
	   		var messageJson=JSON.stringify(jsonObj);
	   		websocket.send(messageJson);
	       }
	   	  function showSelectButton(){
	   	    	 $("#img").click();
	   	    }
	</script>
</body>
</html>
